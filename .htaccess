ErrorDocument 404 /error/pagina_no_encontrada.html
ErrorDocument 401 /error/login_requerido.html

RewriteEngine on
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http://(www\.)?micamello.com.ec/.*$ [NC]
RewriteCond %{HTTP_REFERER} !^https://(www\.)?micamello.com.ec/.*$ [NC]
RewriteCond %{HTTP_REFERER} !^http://localhost/.*$ [NC]
RewriteRule \.(gif|jpg|jpeg|png|js|css)$ - [NC]

RewriteEngine On
RewriteCond %{HTTP_HOST} !^localhost
RewriteCond %{REQUEST_URI} !^/repos_micamello$
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

Options -Indexes

####################################################################

# RewriteBase - Production
RewriteCond %{HTTP_HOST} !^localhost$
RewriteRule . - [E=REWRITEBASE:/]
# RewriteBase - Development
RewriteCond %{HTTP_HOST} ^localhost$
RewriteRule . - [E=REWRITEBASE:/repos_micamello/]

#imagenes del profile
RewriteCond %{REQUEST_URI} \.(jpg|jpeg|pdf|doc|docx)$ [NC]
RewriteRule ^imagenes/usuarios/([a-z]+)/(.*)$ %{ENV:REWRITEBASE}archivo.php?carpeta=$1&archivo=$2 [L]

#login
RewriteRule ^login/$ %{ENV:REWRITEBASE}index.php?mostrar=login [L]

#contrasena
RewriteRule ^contrasena/$ %{ENV:REWRITEBASE}index.php?mostrar=contrasena [L]
RewriteRule ^contrasena/([^.]+)/$ %{ENV:REWRITEBASE}index.php?mostrar=contrasena&opcion=recuperacion&token=$1 [L]

#registro
RewriteRule ^registro/$ %{ENV:REWRITEBASE}index.php?mostrar=registro [L]
RewriteRule ^registro/([^.]+)/$ %{ENV:REWRITEBASE}index.php?mostrar=registro&opcion=activacion&token=$1 [L]

#perfil
RewriteRule ^perfil/$ %{ENV:REWRITEBASE}index.php?mostrar=perfil [L]
RewriteRule ^editarperfil/$ %{ENV:REWRITEBASE}index.php?mostrar=perfil&opcion=paso1 [L]
RewriteRule ^actualizar/$ %{ENV:REWRITEBASE}index.php?mostrar=perfil&opcion=paso1 [L]

#logout
RewriteRule ^logout/$ %{ENV:REWRITEBASE}index.php?mostrar=logout [L]

#cuestionarios
RewriteRule ^cuestionario/$ %{ENV:REWRITEBASE}index.php?mostrar=cuestionario [L]

#velocimetro
RewriteRule ^velocimetro/$ %{ENV:REWRITEBASE}index.php?mostrar=velocimetro [L]

#planes
RewriteRule ^planes/$ %{ENV:REWRITEBASE}index.php?mostrar=plan [L]

#ofertas
RewriteRule ^oferta/([0-9]+)/([A-Z0-9]+)/([A-Z0-9]+)/([A-Z0-9]+)/([A-Z0-9]+)/([0-9]+)/$ %{ENV:REWRITEBASE}index.php?mostrar=oferta&opcion=filtrar&type=$1&param1=$2&param2=$3&param3=$4&param4=$5&page=$6 [L]

RewriteRule ^oferta/([0-9]+)/([A-Z0-9]+)/([A-Z0-9]+)/([A-Z0-9]+)/([0-9]+)/$ %{ENV:REWRITEBASE}index.php?mostrar=oferta&opcion=filtrar&type=$1&param1=$2&param2=$3&param3=$4&page=$5 [L]

RewriteRule ^oferta/([0-9]+)/([A-Z0-9]+)/([A-Z0-9]+)/([0-9]+)/$ %{ENV:REWRITEBASE}index.php?mostrar=oferta&opcion=filtrar&type=$1&param1=$2&param2=$3&page=$4 [L]

RewriteRule ^oferta/([0-9]+)/([A-Z0-9]+)/([0-9]+)/$ %{ENV:REWRITEBASE}index.php?mostrar=oferta&opcion=filtrar&type=$1&param1=$2&page=$3 [L]

RewriteRule ^oferta/$ %{ENV:REWRITEBASE}index.php?mostrar=oferta [L]

RewriteRule ^detalleOferta/([0-9]+)/$ %{ENV:REWRITEBASE}index.php?mostrar=oferta&opcion=detalleOferta&id=$1 [L]
RewriteRule ^detalleOferta/([0-9]+)$ %{ENV:REWRITEBASE}index.php?mostrar=oferta&opcion=detalleOferta&id=$1 [L]